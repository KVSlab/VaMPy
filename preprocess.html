
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Pre-processing &#8212; VaMPy</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=4ec06e9971c5264fbd345897d5258098f11cc577" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=8bf782fb4ee92b3d3646425e50f299c4e1fd152d"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'preprocess';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Computational fluid dynamics" href="simulation.html" />
    <link rel="prev" title="Known issues" href="issues.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="index.html">

  
  
  
  
  
  
  

  
    <img src="_static/logo.png" class="logo__image only-light" alt="Logo image">
    <img src="_static/logo.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="installation.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="issues.html">
                        Known issues
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Pre-processing
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="simulation.html">
                        Computational fluid dynamics
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="postprocess.html">
                        Post-processing
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="quantities.html">
                        Computed quantities
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="cluster.html">
                        Running a simulation on an HPC cluster
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="features.html">
                        Features and issues
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="tutorials.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="artery.html">
                        High-resolution CFD simulation in the internal carotid artery
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="atrium.html">
                        Hemodynamic simulation in the left atrium and left atrial appendage
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api.html">
                        API Reference
                      </a>
                    </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="installation.html">
                        Installation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="issues.html">
                        Known issues
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Pre-processing
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="simulation.html">
                        Computational fluid dynamics
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="postprocess.html">
                        Post-processing
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="quantities.html">
                        Computed quantities
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="cluster.html">
                        Running a simulation on an HPC cluster
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="features.html">
                        Features and issues
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="tutorials.html">
                        Tutorials
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="artery.html">
                        High-resolution CFD simulation in the internal carotid artery
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="atrium.html">
                        Hemodynamic simulation in the left atrium and left atrial appendage
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api.html">
                        API Reference
                      </a>
                    </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item">
  


<a class="navbar-brand logo" href="index.html">

  
  
  
  
  
  
  

  
    <img src="_static/logo.png" class="logo__image only-light" alt="Logo image">
    <img src="_static/logo.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    </div>
    <div class="sidebar-start-items__item">
<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    The Vascular Modeling Pypeline
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="issues.html">Known issues</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Using VaMPy</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Pre-processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="simulation.html">Computational fluid dynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="postprocess.html">Post-processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantities.html">Computed quantities</a></li>
<li class="toctree-l1"><a class="reference internal" href="cluster.html">Running a simulation on an HPC cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features and issues</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="artery.html">High-resolution CFD simulation in the internal carotid artery</a></li>
<li class="toctree-l1"><a class="reference internal" href="atrium.html">Hemodynamic simulation in the left atrium and left atrial appendage</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python API</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

    </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        <label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" data-toggle="tooltip" data-placement="right" title="Toggle primary sidebar">
            <span class="fa-solid fa-bars"></span>
        </label>
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="btn btn-sm"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<div class="dropdown dropdown-repository-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      <li><a href="https://kvslab.github.io/VaMPy/" target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">repository</span>
</a>
</a>
      
      <li><a href="https://kvslab.github.io/VaMPy//issues/new?title=Issue%20on%20page%20%2Fpreprocess.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">open issue</span>
</a>
</a>
      
  </ul>
</div>



<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      <li><a href="_sources/preprocess.md" target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</a>
      
      <li>
<button onclick="printPdf(this)"
  class="btn btn-sm dropdown-item"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</a>
      
  </ul>
</div>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary" data-toggle="tooltip" data-placement="left" title="Toggle secondary sidebar">
            <span class="fa-solid fa-list"></span>
        </label>
    </div>
</div>
            </div>
            
            

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Pre-processing</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#meshing-and-boundary-conditions">
   Meshing and boundary conditions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dimensions-and-scaling">
   Dimensions and scaling
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#smoothing">
   Smoothing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#flow-extensions">
   Flow extensions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#boundary-layers">
   Boundary layers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#refinement">
   Refinement
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mething-method">
   Mething method
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>

            <article class="bd-article" role="main">
              
  <section class="tex2jax_ignore mathjax_ignore" id="pre-processing">
<h1>Pre-processing<a class="headerlink" href="#pre-processing" title="Permalink to this heading">#</a></h1>
<section id="meshing-and-boundary-conditions">
<h2>Meshing and boundary conditions<a class="headerlink" href="#meshing-and-boundary-conditions" title="Permalink to this heading">#</a></h2>
<p>In this brief introduction, we present VaMPyâ€™s functionality by preparing, simulating, and post-processing models of
the <a class="reference external" href="https://en.wikipedia.org/wiki/Internal_carotid_artery">internal carotid artery</a> and
the <a class="reference external" href="https://en.wikipedia.org/wiki/Atrium_(heart)">left atrium</a>, although the software may be readily used for other
tubular or vascular shapes.</p>
<p>The first step of using the Vascular Modeling Pypeline is pre-processing. The pre-processing scripts are located inside
the
<code class="docutils literal notranslate"><span class="pre">automatedPreprocessing</span></code> folder, and can be run by using the <code class="docutils literal notranslate"><span class="pre">vampy-mesh</span></code> command in the terminal. The script generates
a mesh, boundary conditions, and probes for velocity and pressure sampling. Here we will perform pre-processing for the
artery case located in the <code class="docutils literal notranslate"><span class="pre">models</span></code> folder. In this example we pass the input model path (<code class="docutils literal notranslate"><span class="pre">-i</span></code>) and mesh coarsening
factor (<code class="docutils literal notranslate"><span class="pre">-c</span></code>) command-line arguments:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>vampy-mesh<span class="w"> </span>-i<span class="w"> </span>models/artery/artery.vtp<span class="w"> </span>-c<span class="w"> </span><span class="m">1</span>.3
</pre></div>
</div>
<p>When complete, a render window will pop up showing the meshed model, prope points, flow rate and pressure split, as
shown in <a class="reference internal" href="#render"><span class="std std-numref">Fig. 1</span></a>. The script will save the volumetric mesh as <code class="docutils literal notranslate"><span class="pre">artery.vtu</span></code>, alongside a compressed DOLFIN mesh
in <code class="docutils literal notranslate"><span class="pre">artery.xml.gz</span></code>, used for the computational fluid dynamics (CFD) simulations. The pre-processing script will also
produce an info file and a probe file, named <code class="docutils literal notranslate"><span class="pre">artery_info.json</span></code> and <code class="docutils literal notranslate"><span class="pre">artery_probes</span></code>, respectively.</p>
<figure class="align-default" id="render">
<img alt="_images/render.png" src="_images/render.png" />
<figcaption>
<p><span class="caption-number">Fig. 1 </span><span class="caption-text">Visualization of the meshed artery model by running <code class="docutils literal notranslate"><span class="pre">vampy-mesh</span></code>.</span><a class="headerlink" href="#render" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="dimensions-and-scaling">
<h2>Dimensions and scaling<a class="headerlink" href="#dimensions-and-scaling" title="Permalink to this heading">#</a></h2>
<p>VaMPy has been developed for models that are originally segmented from medical images, where the units are often in
millimeters (mm). Hence, the current implementation assumes that the input model is in mm. It is also preferable that
the model is uncapped (open), although there is some experimental methods for uncapping a surface model in case it is
capped (closed).</p>
<p>If your input model is not in mm, you may scale it by adding the <code class="docutils literal notranslate"><span class="pre">--scale-factor</span></code> argument, which takes a numerical
value. To scale your model from m to mm you can run the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>vampy-mesh<span class="w"> </span>-i<span class="w"> </span>models/artery/artery.vtp<span class="w"> </span>-c<span class="w"> </span><span class="m">1</span>.3<span class="w"> </span>--scaling-factor<span class="w"> </span><span class="m">1000</span>
</pre></div>
</div>
</section>
<section id="smoothing">
<h2>Smoothing<a class="headerlink" href="#smoothing" title="Permalink to this heading">#</a></h2>
<p>It may be necessary to smooth the input model in order to improve the quality of the mesh. In VaMPy, we have included
three smoothing techniques that are controlled by the <code class="docutils literal notranslate"><span class="pre">--smoothing-method</span></code> (<code class="docutils literal notranslate"><span class="pre">-sm</span></code>) argument. These are
Laplacian (<code class="docutils literal notranslate"><span class="pre">laplace</span></code>), Taubin (<code class="docutils literal notranslate"><span class="pre">taubin</span></code>), and Voronoi diagram smoothing (<code class="docutils literal notranslate"><span class="pre">voronoi</span></code>). Furthermore, for the Laplace and
Taubin smoothing, the user may select the number of smoothing iterations, controlled by
the <code class="docutils literal notranslate"><span class="pre">--smoothing-iterations</span></code> (<code class="docutils literal notranslate"><span class="pre">-si</span></code>)
argument. Similarly, the intensity of the Voronoi diagram smoothing method may be controlled by
the <code class="docutils literal notranslate"><span class="pre">--smoothing-factor</span></code> (<code class="docutils literal notranslate"><span class="pre">-sf</span></code>) argument, which ranges between 0 and 1, corresponding to 0 and 100%, respectively. By
default, no smoothing is performed. To perform Laplacian smoothing using the artery model, we may run the following
command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>vampy-mesh<span class="w"> </span>-i<span class="w"> </span>models/artery/artery.vtp<span class="w"> </span>-c<span class="w"> </span><span class="m">1</span>.3<span class="w"> </span>--smoothing-method<span class="w"> </span>laplace<span class="w"> </span>-si<span class="w"> </span><span class="m">800</span>
</pre></div>
</div>
<p>In <a class="reference internal" href="#id1"><span class="std std-numref">Fig. 2</span></a>, we have shown a comparison of all the smoothing methods using <code class="docutils literal notranslate"><span class="pre">-si</span> <span class="pre">800</span></code> and <code class="docutils literal notranslate"><span class="pre">-sf</span> <span class="pre">0.75</span></code>, and
included the original model for reference (in red).</p>
<figure class="align-default" id="id1">
<img alt="_images/smoothing.png" src="_images/smoothing.png" />
<figcaption>
<p><span class="caption-number">Fig. 2 </span><span class="caption-text">From left to right: the original artery model in red, and a comparison of the three smoothing methods; Laplace, Taubin and Voronoi smoothing, against the original model (red).</span><a class="headerlink" href="#id1" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="flow-extensions">
<h2>Flow extensions<a class="headerlink" href="#flow-extensions" title="Permalink to this heading">#</a></h2>
<p>Prior to mesh generation, flow extensions may be appended to the input model, often to assure that flow is fully
developed as it enters and leaves the domain during CFD simulation. In VaMPy, this is controlled by
the <code class="docutils literal notranslate"><span class="pre">--add-flowextensions</span></code> (<code class="docutils literal notranslate"><span class="pre">-f</span></code>)
argument, which takes a boolean value and is <code class="docutils literal notranslate"><span class="pre">True</span></code> by default. The user may also supply the length of the flow
extensions at what is considered to be the inlet(s) and outlet(s), controlled by the <code class="docutils literal notranslate"><span class="pre">--inlet-flowextension</span></code> (<code class="docutils literal notranslate"><span class="pre">-fli</span></code>)
and <code class="docutils literal notranslate"><span class="pre">--outlet-flowextension</span></code> (<code class="docutils literal notranslate"><span class="pre">-flo</span></code>) command line arguments. Both are set to <code class="docutils literal notranslate"><span class="pre">5</span></code> by default, corresponding to a flow
extension length equal to five times the length of the local radius at the boundary (inlet/outlet). To demonstrate, the
following command will apply flow extensions to the artery model that are two and four times the local radius in length
at the inlet and outlet, respectively:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>vampy-mesh<span class="w"> </span>-i<span class="w"> </span>models/artery/artery.vtp<span class="w"> </span>-c<span class="w"> </span><span class="m">1</span>.3<span class="w"> </span>--add-flowextensions<span class="w"> </span>True<span class="w"> </span>-fli<span class="w"> </span><span class="m">2</span><span class="w"> </span>-flo<span class="w"> </span><span class="m">4</span>
</pre></div>
</div>
<p>To visualize the difference, we have shown a comparison between the original model (left) and four models with flow
extensions of varying length, ranging from 1 to 4 times the local radius, in <a class="reference internal" href="#flowext"><span class="std std-numref">Fig. 3</span></a>.</p>
<figure class="align-default" id="flowext">
<img alt="_images/flow_extension.png" src="_images/flow_extension.png" />
<figcaption>
<p><span class="caption-number">Fig. 3 </span><span class="caption-text">On the left, the original model with no flow extensions. The remining models harbor flow extensions of varying length, based on the local radius at the outlet and inlet boundary.</span><a class="headerlink" href="#flowext" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="boundary-layers">
<h2>Boundary layers<a class="headerlink" href="#boundary-layers" title="Permalink to this heading">#</a></h2>
<p>In fluid flows where the Reynolds numbers are large, flow simulations will cause strong gradients near the wall,
requiring fine resolution of the solution close to the boundary. In this situation it is essential to refine the finite
element mesh isotropically to capture strong gradients. This is also relevant when computing hemodynamic indices on the
domain boundary, such as the wall shear stress, which is demonstrated in the <a class="reference internal" href="postprocess.html#overview-post"><span class="std std-ref">post-processing</span></a> section.
Therefore, VaMPy adds four boundary layers to the computational domain by default. However, these can be turned off by
setting the <code class="docutils literal notranslate"><span class="pre">--add-boundary-layer</span></code> (<code class="docutils literal notranslate"><span class="pre">-bl</span></code>) argument to <code class="docutils literal notranslate"><span class="pre">False</span></code>. Thus, to skip adding boundary layers for the artery
model, we may run the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>vampy-mesh<span class="w"> </span>-i<span class="w"> </span>models/artery/artery.vtp<span class="w"> </span>-c<span class="w"> </span><span class="m">1</span>.3<span class="w"> </span>--add-boundary-layer<span class="w"> </span>False
</pre></div>
</div>
<p>In <a class="reference internal" href="#bl"><span class="std std-numref">Fig. 4</span></a> we demonstrate the qualitative difference when adding or removing boundary layers to the volumetric
mesh.</p>
<figure class="align-default" id="bl">
<img alt="_images/boundary_layers.png" src="_images/boundary_layers.png" />
<figcaption>
<p><span class="caption-number">Fig. 4 </span><span class="caption-text">On the left, a volumetric mesh with no boundary layer. On the right, a volumetric mesh with four boundary layers, which is the default in VaMPy.</span><a class="headerlink" href="#bl" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="refinement">
<h2>Refinement<a class="headerlink" href="#refinement" title="Permalink to this heading">#</a></h2>
<p>Mesh generation may be performed with refinement of a particlar region. To manually refine a region on a geometry, the
user may provide the <code class="docutils literal notranslate"><span class="pre">--refine-region</span></code> flag, or <code class="docutils literal notranslate"><span class="pre">-r</span></code> for short. In addition, the user may provide
the <code class="docutils literal notranslate"><span class="pre">--region-points</span></code> (<code class="docutils literal notranslate"><span class="pre">-rp</span></code>) argument, followed by three numbers representing the <span class="math notranslate nohighlight">\(x, y\)</span>, and <span class="math notranslate nohighlight">\(z\)</span> coordinates of a
point on the surface to be refined. If the point is located slightly off the surface, it will stick to the closest
surface point. And example of this feature is shown in the <a class="reference internal" href="atrium.html#tutorial-atrium"><span class="std std-ref">atrium tutorial</span></a>.</p>
</section>
<section id="mething-method">
<h2>Mething method<a class="headerlink" href="#mething-method" title="Permalink to this heading">#</a></h2>
<p>There are currently three meshing methods to chose between, which determine the local mesh density. The methods are
selected throught command line argument <code class="docutils literal notranslate"><span class="pre">--meshing-method</span></code> (<code class="docutils literal notranslate"><span class="pre">-m</span></code>), and can be set to either <code class="docutils literal notranslate"><span class="pre">constant</span></code>, <code class="docutils literal notranslate"><span class="pre">diameter</span></code>,
or <code class="docutils literal notranslate"><span class="pre">curvature</span></code>. By default, the <code class="docutils literal notranslate"><span class="pre">diameter</span></code> method is selected. The three methods are further examined in
the <a class="reference internal" href="artery.html#tutorial-artery"><span class="std std-ref">artery tutorial</span></a>.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

            </article>
            

            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="issues.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Known issues</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="simulation.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Computational fluid dynamics</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#meshing-and-boundary-conditions">
   Meshing and boundary conditions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dimensions-and-scaling">
   Dimensions and scaling
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#smoothing">
   Smoothing
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#flow-extensions">
   Flow extensions
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#boundary-layers">
   Boundary layers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#refinement">
   Refinement
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mething-method">
   Mething method
  </a>
 </li>
</ul>

</nav>
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Henrik A. Kjeldsberg
</p>

  </div>
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2023.<br>

</p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
Last updated on None.<br>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </div>
        </footer>
        

      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  </body>
</html>